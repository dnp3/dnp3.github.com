<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Event-driven scalability &mdash; Definitive Guide to opendnp3 2.0.0-RC1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0-RC1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Definitive Guide to opendnp3 2.0.0-RC1 documentation" href="../index.html" />
    <link rel="up" title="What is opendnp3?" href="index.html" />
    <link rel="next" title="Emphasis on testing" href="testing.html" />
    <link rel="prev" title="Supported platforms" href="platforms.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="testing.html" title="Emphasis on testing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="platforms.html" title="Supported platforms"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Definitive Guide to opendnp3 2.0.0-RC1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">What is opendnp3?</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="event-driven-scalability">
<h1>Event-driven scalability<a class="headerlink" href="#event-driven-scalability" title="Permalink to this headline">Â¶</a></h1>
<p><strong>Protocol stack anti-patterns</strong></p>
<p>Many implementations of the protocol use a thread per communication channel when connecting a master to many outstations.
This type of architecture doesn&#8217;t scale well. It creates a lot of thrasing and context switching.
Other implementations use a single-thread with non-blocking I/O. This design is efficient, but has parallelization issues.
If the one thread is ever blocked, other connections are dead in the water.</p>
<img alt="../_images/no-blocking.gif" src="../_images/no-blocking.gif" />
<p><strong>Event-driven, asynchronous, and multi-core</strong></p>
<p>Opendnp3 borrows a design pattern from modern web servers: a purely asynchronous programming model driven by a thread pool.
Opendnp3 uses 100% event based I/O taking advantage of your OS&#8217;s best socket multiplexing abstractions.
This means that your CPU doesn&#8217;t churn while your program is idle and you don&#8217;t have to make a trade-off between latency and CPU usage.
Opendnp3 achieves this efficiency by using <a class="reference external" href="http://think-async.com/">ASIO</a> to handle all timers and I/O requests.
If you&#8217;re curious how your specific platform implements the asynchronous I/O have a look <a class="reference external" href="http://think-async.com/Asio/asio-1.10.2/doc/asio/using.html">here</a>.</p>
<p>One way to understand why this is so important is to consider how your computer does work concurrently.
You can only truly do as many things concurrently as you have threads or cores.
Your operating system must then fake concurrency for the extra threads by multi-tasking using interrupts to force switches between them.
Many active threads leads to excessive <a class="reference external" href="http://en.wikipedia.org/wiki/Context_switch">context switching</a> and memory usage.
A more efficient methodology is to only use the number of threads that your system can actually run concurrently, aka a thread pool sized to the native concurrency of your system.
The magic trick is then to NEVER BLOCK any of them so that they&#8217;re all always doing useful work as fast as they can.
This leads to efficient CPU utilization, lower memory usage, and lower average latency for servicing requests under load.
Opendnp3 uses 100% non-blocking I/O under the hood.
That&#8217;s why it scales so well. Many systems in the industry have a hard time bringing up and maintaining more than a couple hundred socket connections.
Opendnp3 easily scales right up to the operating system limit, all while using a small amount of CPU and RAM.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/automatak_logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="platforms.html"
                        title="previous chapter">Supported platforms</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="testing.html"
                        title="next chapter">Emphasis on testing</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/opendnp3-intro/scalable.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="testing.html" title="Emphasis on testing"
             >next</a> |</li>
        <li class="right" >
          <a href="platforms.html" title="Supported platforms"
             >previous</a> |</li>
        <li><a href="../index.html">Definitive Guide to opendnp3 2.0.0-RC1 documentation</a> &raquo;</li>
          <li><a href="index.html" >What is opendnp3?</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Automatak LLC.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>